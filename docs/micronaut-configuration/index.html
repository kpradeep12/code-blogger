<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="google-site-verification" content="17GXTKdnqGMgpkrc7Kbz323f4wg41DzBsDcNsfnHmVo" />
<!--below verification is techstackjava.com-->
<meta name="google-site-verification" content="tuMqCtGo9Q2zjZ6e2k1iswdB1R56vqiqYfbSrrzlyRE" />
<meta name="google-site-verification" content="6prhbit_zvr5fgjCg8h5zm8eH7tQrVeMcbHGOhb393g" />
<!-- Twitter cards-->
<meta name="twitter:site"    content="@PradeepK4J">
<meta name="twitter:creator" content="@pradeep">
<meta name="twitter:title"   content="Cloud Configuration With Micronaut and Consul">

<meta name="twitter:card"  content="summary_large_image">
<meta name="twitter:image" content="https://thetechstack.net/assets/images/banners/Micronaut-cloud-configuration-with-consul.png">

<!-- end of Twitter cards -->


<link rel="icon" href="favicon-32x32.png">

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
    
<!--<title>Cloud Configuration With Micronaut and Consul | The Tech Stack . Net</title>-->
    
<meta name="description" content="Services may be running on multiple machines/containers, and if each service has its copy of the configuration, then it is a very tedious job to change and restart all instances, in cloud environments we can resolve this issue by publishing configuration at a single location and allowing all services to read it. We learn more about this by developing a sample application using Micronaut and Consul."> 
    
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    
<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
    
<link href="/assets/css/screen.css" rel="stylesheet">
    
<link href="/assets/css/main.css" rel="stylesheet">
<link href="/assets/css/custom.css" rel="stylesheet">
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Cloud Configuration With Micronaut and Consul | Pradeep’s Java blog</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Cloud Configuration With Micronaut and Consul" />
<meta name="author" content="pradeep" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Services may be running on multiple machines/containers, and if each service has its copy of the configuration, then it is a very tedious job to change and restart all instances, in cloud environments we can resolve this issue by publishing configuration at a single location and allowing all services to read it. We learn more about this by developing a sample application using Micronaut and Consul." />
<meta property="og:description" content="Services may be running on multiple machines/containers, and if each service has its copy of the configuration, then it is a very tedious job to change and restart all instances, in cloud environments we can resolve this issue by publishing configuration at a single location and allowing all services to read it. We learn more about this by developing a sample application using Micronaut and Consul." />
<link rel="canonical" href="https://thetechstack.net/micronaut-configuration/" />
<meta property="og:url" content="https://thetechstack.net/micronaut-configuration/" />
<meta property="og:site_name" content="Pradeep’s Java blog" />
<meta property="og:image" content="https://thetechstack.net/assets/images/banners/Micronaut-cloud-configuration-with-consul.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-16T13:11:10-04:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Cloud Configuration With Micronaut and Consul","dateModified":"2019-07-16T13:11:10-04:00","datePublished":"2019-07-16T13:11:10-04:00","image":"https://thetechstack.net/assets/images/banners/Micronaut-cloud-configuration-with-consul.png","url":"https://thetechstack.net/micronaut-configuration/","mainEntityOfPage":{"@type":"WebPage","@id":"https://thetechstack.net/micronaut-configuration/"},"author":{"@type":"Person","name":"pradeep"},"description":"Services may be running on multiple machines/containers, and if each service has its copy of the configuration, then it is a very tedious job to change and restart all instances, in cloud environments we can resolve this issue by publishing configuration at a single location and allowing all services to read it. We learn more about this by developing a sample application using Micronaut and Consul.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-115619272-1', 'auto');
  ga('send', 'pageview');
</script>


</head>
    


<body class="layout-post">

    
<!-- Begin Menu Navigation
================================================== -->
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    
    <div class="container pr-0">    
    
    <!-- Begin Logo -->
    <a class="navbar-brand" href="/">
    <img src="/" alt="The Tech Stack . Net">
    </a>
    <!-- End Logo -->
  
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="collapse navbar-collapse" id="navbarMediumish">
       
        <!-- Begin Menu -->
        
            <ul class="navbar-nav ml-auto align-items-center">
                <!--
                
                <li class="nav-item">
                
                <a class="nav-link" href="/index.html">Blog</a>
                </li>-->

                <li class="nav-item">
                    <div>
                        <script async src="https://cse.google.com/cse.js?cx=a39f12b298f0f881d"></script>
                        <div class="gcse-search"></div>
                    </div>
                </li>
                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdown00" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Libraries</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown00">
                        <a class="nav-link" href="/pages/library/docker-images-library/">Docker Image's</a>
                        <a class="nav-link" href="/pages/library/spring-boot-dependencies-library/">Spring Boot Dependencie's</a>
                    </div>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Quick Reference's</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                        <a class="nav-link" href="/pages/quick-references/dockerfile-quick-reference/">Dockerfile</a>
                        <a class="nav-link" href="/pages/quick-references/junit-5-quick-reference/">JUnit 5</a>
                    </div>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdown02" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Cheat Sheet's</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown02">
                        <a class="nav-link" href="/pages/cheat-sheets/docker-cli-cheat-sheet/">Docker CLI</a>
                        <a class="nav-link" href="/pages/cheat-sheets/git-cheat-sheet/">Git</a>
                    </div>
                </li>

                
                <li class="nav-item">
                
                <a class="nav-link" href="/about">About Me</a>
                </li>

                <!--
                
                <li class="nav-item">
                
                <a class="nav-link" href="/twitter">Twitter</a>
                </li>
                
                <li class="nav-item">
                <a target="_blank"  class="nav-link" href="https://twitter.com/PradeepK4J"><i class="fab fa-twitter"></i></a>
                </li>-->
                
            </ul>		
  
        <!-- End Menu -->

    </div>
        
    </div>
</nav>
<!-- End Navigation
================================================== -->
    
<div class="site-content">


<div class="container">

    
<!-- Site Title
================================================== -->
<!--<div class="mainheading">
    <h1 class="sitetitle">The Tech Stack . Net</h1>
    <p class="lead">
         Sharing my Java coding experiments
    </p>
</div>-->

    
    
<!-- Content
================================================== --> 
<div class="main-content">
    

<!-- Begin Article
================================================== -->
<div class="container">
	<div class="row">

		<!-- Post Share -->
		<div class="col-md-2 pl-0">            
           <div class="share">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=Cloud Configuration With Micronaut and Consul&url=https://thetechstack.net/micronaut-configuration/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=https://thetechstack.net/micronaut-configuration/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://plus.google.com/share?url=https://thetechstack.net/micronaut-configuration/" onclick="window.open(this.href, 'facebook-google', 'width=550,height=435');return false;">
        <i class="fab fa-google"></i>
        </a>
        </li>
        
    </ul>
    
    <div class="sep">
    </div>				
    <ul>
        <li> 
        <a  class="small smoothscroll" href="#disqus_thread"></a>
        </li>
    </ul>
    
</div>  
		</div>
		

		<!-- Post -->        
        
        
		<div class="col-md-9 flex-first flex-md-unordered">
			<div class="mainheading">

                <!-- Author Box -->
                				
				<div class="row post-top-meta">
					<div class="col-md-2">
						<img class="author-thumb" src="/assets/images/author.jpg" alt="Pradeep Kundarapu">
					</div>
					<div class="col-md-10">
                        <a target="_blank" class="link-dark" href="https://thetechstack.net">Pradeep Kundarapu</a>
                        <a target="_blank" href="https://twitter.com/PradeepK4J" class="btn follow">Follow</a>
						<div class="author-description">Java developer, blogger and tech enthusiast.</div>						
					</div>
				</div>				
                
                
                <!-- Post Title -->
				<h1 class="posttitle">Cloud Configuration With Micronaut and Consul</h1> 
                
			</div>

			<!-- Post Featured Image -->
			<img class="featured-image img-fluid" src="https://thetechstack.net/assets/images/banners/Micronaut-cloud-configuration-with-consul.png" alt="Cloud Configuration With Micronaut and Consul">
			<!-- End Featured Image -->

			<!-- Post Content -->
			<div class="article-post">
				<p><strong><a href="https://micronaut.io/">Micronaut</a></strong> is one of the new framework available to Java world which helps in developing web, cloud, and serverless applications. Recently we see many new frameworks evolving like <strong>Quarkus</strong> from Ret Hat and <strong>Helidon</strong> from Oracle.</p>

<p>We already have <strong>Spring</strong> framework, which is the most famous framework and which used in the majority of applications in the enterprise world, but why we need new frameworks? Spring framework can do most of the things, but at the same time, it consumes much memory and takes a while to start because it depends on runtime reflection to process annotations. All the other frameworks which we mentioned earlier works on compile-time annotation processing and they take milliseconds to one or two seconds to startup and consumes very less memory. These frameworks are a good fit in developing microservices.</p>

<p>In this article, we use <strong>Micronaut</strong> to develop a simple microservice, and then we configure it with cloud configuration. Why do we need a cloud configuration? In the microservices world, we need to scale our app based on the demand so we might have multiple instances of the app running on different machines/containers. It is challenging to maintain the same configuration at each application instance because it involves much maintenance, to overcome this we can keep our configuration at a single location and make all app instances to fetch their configuration from this central location.</p>

<ul id="markdown-toc">
  <li><a href="#create-micronaut-project" id="markdown-toc-create-micronaut-project">Create Micronaut project</a></li>
  <li><a href="#install-consul" id="markdown-toc-install-consul">Install Consul</a></li>
  <li><a href="#create-controller" id="markdown-toc-create-controller">Create Controller</a></li>
  <li><a href="#insert-keyvalue-pairs-in-consul" id="markdown-toc-insert-keyvalue-pairs-in-consul">Insert Key/Value pairs in Consul</a>    <ul>
      <li><a href="#web-application" id="markdown-toc-web-application">Web application</a></li>
      <li><a href="#curl-keyvalue" id="markdown-toc-curl-keyvalue">CURL Key/Value</a></li>
      <li><a href="#curl-file" id="markdown-toc-curl-file">CURL file</a></li>
    </ul>
  </li>
  <li><a href="#handle-multiple-environments" id="markdown-toc-handle-multiple-environments">Handle multiple environments</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ul>

<blockquote>
  <p>Source code of this project is available at <a href="https://github.com/kpradeep12/techstack-projects/tree/master/micronaut-config">github</a></p>
</blockquote>

<h3 id="create-micronaut-project">Create Micronaut project</h3>

<p>Creating a new Micronaut project is so simple with a Micronaut CLI tool. Installing is simple if you have SDKMAN. Execute below command;</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">sdk install micronaut</span></code></pre></figure>

<p>There are many other ways to install Micronaut. Follow this <a href="https://docs.micronaut.io/1.2.0.RC2/guide/index.html#buildCLI">link</a> to know more about other options.</p>

<p>After the installation completes, navigate to any folder from your terminal where you want to create new Micronaut project, then execute below command;</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">mn create-app micronaut-config --features config-consul</span></code></pre></figure>

<p>This command creates an empty project with a cloud configuration feature. By default, it creates a gradle project but if you wish to create a Maven-based then supply ‘–build maven’ option.</p>

<p>Open the newly created project in your favorite IDE, and configure it to compile your project, follow the steps based on the information given <a href="https://docs.micronaut.io/1.2.0.RC2/guide/index.html#ideSetup">here</a>.</p>

<p>We have our new project ready. Navigate to the source code and see how the project is structured. Important file to see is <strong>src/main/resources/bootstrap.yml</strong></p>

<p>Micronaut adds bootstrap.yml to the project because we added ‘config-consul’ feature. This file gets loaded first, and it contains important information about the <strong>CONSUL</strong> instance. Consul is a tool which helps in managing microservices; its main features are service discovery, service mesh, and configuration. In our case, it helps us to maintain configuration in a single location.</p>

<h3 id="install-consul">Install Consul</h3>

<p>We have our project ready now let’s install <strong>CONSUL</strong>. There are various ways to install Consul. I used precompiled binaries and its easy. Follow the instructions <a href="https://www.consul.io/docs/install/index.html#precompiled-binaries">here</a>.</p>

<p>Once the installation completes then run Consul by executing below command;</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="gp">consul agent -server -bootstrap-expect=1 -data-dir &lt;PATH TO CONSUL DATA&gt;</span>/data/ <span class="nt">-config-dir</span> &lt;PATH TO CONSUL DATA&gt;/config-data/ <span class="nt">-ui</span> <span class="nt">-bind</span><span class="o">=</span>&lt;IP ADDRESS&gt;</code></pre></figure>

<p>Replace <PATH TO="" CONSUL="" DATA=""> with any folder on your computer which Consul can use to persist data and configuration and replace <IP ADDRESS=""> with your computers IP. Once the Consul started running, then we can access it from the browser at [http://localhost:8500/ui/](http://localhost:8500/ui/). Navigate to 'Key/Value' from the top menu which directs us to the configuration page.</IP></PATH></p>

<h3 id="create-controller">Create Controller</h3>

<p>Let’s create our first controller with proper annotations and an endpoints. Create a new package, ‘api’ under micronaut.config and create UserController.java with the following content.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">micronaut</span><span class="o">.</span><span class="na">config</span><span class="o">.</span><span class="na">api</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.micronaut.context.annotation.Value</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.micronaut.http.MediaType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.micronaut.http.annotation.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.micronaut.http.annotation.Get</span><span class="o">;</span>

<span class="nd">@Controller</span><span class="o">(</span><span class="s">"/user"</span><span class="o">)</span>    <span class="c1">// &lt;1&gt;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserController</span> <span class="o">{</span>
    <span class="nd">@Value</span><span class="o">(</span><span class="s">"${welcome-message:Hello all!}"</span><span class="o">)</span>    <span class="c1">// &lt;2&gt;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="nd">@Get</span><span class="o">(</span><span class="n">produces</span> <span class="o">=</span> <span class="n">MediaType</span><span class="o">.</span><span class="na">TEXT_PLAIN</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>     <span class="c1">// &lt;3&gt;</span>
        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p><strong>&lt;1&gt;</strong> UserController class is annotated with <strong>@Controller</strong> annotation with <strong>/user</strong> as endpoint.<br />
  <strong>&lt;2&gt;</strong> A String field <strong>message</strong> is declared with <strong>@Value</strong>. This annotation contains two parts <strong>key</strong> and <strong>default value</strong>. It tries to load the configuration value at welcome-message and if it does not find then returns the default value. In this case, the default value is ‘Hello all!’<br />
  <strong>&lt;3&gt;</strong> index() method returns the value in message property.</p>

<p>Our controller is ready so let’s run micronaut.config.Application.java. If no errors in the console then you can hit http://localhost:8080/user/. Index page shows the default message ‘Hello all!’ because we not configured any value for welcome-message.</p>

<p>On my computer, I got below exception in IntelliJ Idea editor. I solved it by enabling ‘Include dependencies with Provided scope’ checkbox in <strong>Run &gt; Edit Configuration</strong> in the menu.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Exception <span class="k">in </span>thread <span class="s2">"main"</span> java.lang.NoClassDefFoundError: io/micronaut/context/ApplicationContextBuilder</code></pre></figure>

<h3 id="insert-keyvalue-pairs-in-consul">Insert Key/Value pairs in Consul</h3>

<p>On application startup, you should see a log message like ‘Resolved 0 configuration sources from client: compositeConfigurationClient(consul)’ This mentions the count of configurations it resolved from Consul is zero because we not yet configured any value. There are many ways to insert key/values in Consul.</p>

<h5 id="web-application">Web application</h5>

<p>Before proceeding, make sure Consul is up</p>
<ul>
  <li>Access Consul at http://localhost:8500/ui/</li>
  <li>Go to Key/Value from the top menu.</li>
  <li>Micronaut expects configurations to be under <strong>config</strong> folder. Consul allows us to create folders to organize Key/Values. To create a config folder, click on <strong>Create</strong> button. In the ‘Key or folder’ field enter <strong>config/</strong> when a key ends with a backslash then that is converted to a folder. Click on <strong>Save</strong>.</li>
  <li>Create [application name] folder under config/ . Micronaut expects config/[application name] as folder structure in Consul. Navigate to config/ folder and in the ‘key or folder’ field enter <strong>micronaut-config/</strong> and click on <strong>Save</strong></li>
  <li>Under config/miconaut-config/ create new key/value pair; In ‘Key or folder’ field enter ‘welcome-message’ and in the value enter ‘Hello World From Consul.’, then click on Save.</li>
</ul>

<p>We have our first Key/Value pair. Let’s restart our app and see if it picks up our configuration. Access app at http://localhost:8080/user/ it should show ‘Hello World From Consul.’</p>

<h5 id="curl-keyvalue">CURL Key/Value</h5>

<p>If you have multiple Key/Value pairs, then it is tedious to manage them from web application. We can use the Consul REST API to do the same operation with CURL. Before that, delete existing ‘welcome-message’ key, then from a terminal execute below command.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">curl -X PUT -d @- localhost:8500/v1/kv/config/micronaut-config/welcome-message &lt;&lt;&lt; 'Hello World From Consul'</span></code></pre></figure>

<p>New key-value pair got created at config/micronaut-config, now restart the app and see if it picks up this value.</p>

<h5 id="curl-file">CURL file</h5>

<p>Instead of having multiple key-value pairs, we can organize all properties in a single file and upload them at once. It is an even more straightforward approach comparing to maintaining multiple key/value pairs; we can keep all our application-specific properties in a single file. Before working on this approach, delete existing key ‘welcome-message.’ Now create a new yml file in your computer, let’s call it micronaut-config.yml and put below content in it.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">welcome-message</span><span class="pi">:</span> <span class="s">Hello World From Consul</span></code></pre></figure>

<p>Upload this file to Consul using CURL, in terminal navigate to the location where micronaut-config.yml is created and execute below command.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">curl -X PUT --data-binary @./micronaut-config.yml localhost:8500/v1/kv/config/micronaut-config</span></code></pre></figure>

<p>Restart the application, and it should pick up welcome-message.</p>

<h3 id="handle-multiple-environments">Handle multiple environments</h3>

<p>Micronaut supports multi-environment configurations. It helps us to create multiple versions of our configuration based on the environment. Assume our local environment as <strong>dev</strong>, and let’s create a configuration for dev version. Before that let’s delete ‘micronaut-config’ folder in Consul.</p>

<p>Micronaut expects environment-specific configurations should be at <strong>config/[application name],[environment]</strong> location. So execute below CURL command to upload file to new environment specific location.</p>

<figure class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">curl -X PUT --data-binary @./micronaut-config.yml localhost:8500/v1/kv/config/micronaut-config,dev</span></code></pre></figure>

<p>Note that application is not yet aware of its environment, so if you restart the app, it does not pick ‘welcome-message’ because now configurations are in <strong>dev</strong> space. We need to make the application to know about its environment so pass VM option <strong>-Dmicronaut.environments=dev</strong> to JVM. In IDE’s you can pass this to JVM by editing run configurations. In IntelliJ you can edit configurations by going to <strong>Run &gt; Edit Configuration</strong></p>

<p>Now the app is aware of its environment, but by default, Micronaut assumes configuration as Key/Values, so we need to update bootstrap.yml to add new configuration which tells Micronaut to read the file. Add below configuration in bootstrap.yml (consul.client.config.format: YAML)</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">micronaut</span><span class="pi">:</span>
  <span class="na">application</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">micronaut-config</span>
  <span class="na">config-client</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">consul</span><span class="pi">:</span>
  <span class="na">client</span><span class="pi">:</span>
    <span class="na">registration</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">config</span><span class="pi">:</span>
      <span class="na">format</span><span class="pi">:</span> <span class="s">YAML</span>
    <span class="na">defaultZone</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CONSUL_HOST:localhost}:${CONSUL_PORT:8500}"</span></code></pre></figure>

<p>Now restart the application, and it should pick welcome-message from dev folder. You can add multiple environment folders for the same application.</p>

<h3 id="conclusion">Conclusion</h3>

<p>We created a new Micronaut application and integrated with Consul to read the configuration on startup. Multiple instances of services read the configuration from Consul instead of from its local classpath.</p>

			</div>

            <!-- Post Date -->
            <p>
            <small>
                <span class="post-date"><time class="post-date" datetime="2019-07-16">16 Jul 2019</time></span>           
                
                </small>
            </p>
            
			<!-- Post Categories -->
			<div class="after-post-tags">
				<ul class="tags">
                    
                    
                    <li>
                     <a href="/category/cloud/">cloud</a>
                    </li>
                    
				</ul>
			</div>
			<!-- End Categories -->
            
            <!-- Prev/Next -->
            <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
            
            <a class="prev d-block col-md-6" href="https://thetechstack.net/async-method-invocation-design-pattern/"> &laquo; Asyn Method Invocation Design Pattern</a>
            
            
            <a class="next d-block col-md-6 text-lg-right" href="https://thetechstack.net/create-singleton-instance-in-kotlin/">Create Singleton Instance In Kotlin &raquo; </a>
            
            <div class="clearfix"></div>
            </div>
            <!-- End Categories -->

		</div>
		<!-- End Post -->

	</div>
</div>
<!-- End Article
================================================== -->

  

<!-- Begin Comments
================================================== -->

    <div class="container">
        <div id="comments" class="row justify-content-center mb-5">
            <div class="col-md-8">              
                
<section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'thetechstack-net'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
                
            </div>
        </div>
    </div>

<!--End Comments
================================================== -->


</div>

<!-- Bottom Alert Bar
================================================== -->
<div class="alertbar">
	<div class="container text-center">
		<span>Never miss any <b>article</b>, subscribe to my newsletter</span>
        <form action="https://thetechstack.us7.list-manage.com/subscribe/post?u=1381d872f022743eb338f00a1&amp;id=88d9fceb21" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate" target="_blank" novalidate>
            <div class="mc-field-group">
            <input type="email" placeholder="Email" name="EMAIL" class="required email" id="mce-EMAIL" autocomplete="on" required>
            <input type="submit" value="Subscribe" name="subscribe" class="heart">
            </div>
        </form>
	</div>
</div>
    
</div>
<!--
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
            <div class="d-md-flex align-items-center justify-content-center h-100">
                <h2 class="d-md-block align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2>
            </div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
            
          
             
              <a href="/category/java">Java (34)</a>
             
              <a href="/category/reactiveX">Reactivex (3)</a>
             
              <a href="/category/docker">Docker (2)</a>
             
              <a href="/category/tools">Tools (1)</a>
             
              <a href="/category/spring">Spring (3)</a>
             
              <a href="/category/kotlin">Kotlin (12)</a>
             
              <a href="/category/cloud">Cloud (1)</a>
             
              <a href="/category/book">Book (1)</a>
            
          
        

		</div>
	</div>
</div>
 -->


<!-- Begin Footer
================================================== -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                 Copyright © 2021 The Tech Stack . Net 
            </div>
        </div>
    </div>
</footer>
<!-- End Footer
================================================== -->

   
</div> 
<!-- Placed at the end of the document so the pages load faster -->
    
<script src="/assets/js/jquery.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    
<script src="/assets/js/ie10-viewport-bug-workaround.js"></script>
    
<script src="/assets/js/mediumish.js"></script>
    
<script id="dsq-count-scr" src="//thetechstack-net.disqus.com/count.js"></script>
</body>
</html>
